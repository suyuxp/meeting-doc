.. _prefix_exception:

系统出错设计
=========================


出错信息
-------------------------

* 逻辑级错误，即业务规则错误，应按照 `HTTP` 的约定，返回给前端
* 系统级错误，即意外不可预知的错误，应及时返回给 `Sentry` 错误日志系统
* 崩溃级错误，即系统已经无法启动，则由监控系统及时返回给系统管理员


补救措施
-------------------------

* 数据库错误。进行实时备份，并传到远端，保障系统意外的不可恢复故障，数据仍然在
* 资源不可恢复错误。定期进行整机快照备份
* 增加防御措施，提升安全性，减少恶意攻击造成的系统出错
* 监控资源使用，一旦出现资源不足，应及时通知管理员，采取断网、限流等应急措施
* 代码缺陷，应通过错误日志采集系统及时通报程序员，并通过快速修复及时处理


系统维护设计
-------------------------

可扩展性
^^^^^^^^^^^^^^^^^^^^^^^^^

采用模块化的微服务架构，尽可能不动原有代码与运行的情况下，进行功能扩展。以保障基本功能稳定。


小规模测试
^^^^^^^^^^^^^^^^^^^^^^^^^

新功能上线，可以通过小规模小范围的测试验证，来决定是否正式上线。


应急措施
^^^^^^^^^^^^^^^^^^^^^^^^^

#. `1` 小时内响应的应急运维团队
#. 限流、熔断、负载均衡等多种控制资源使用的措施

